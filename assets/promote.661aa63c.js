import{E as N,e as $}from"./vant-vendor.831bb53a.js";import{d as B,r as o,o as D,K as d,Q as f,R as M,F as g,Z as P,u as R,c as b,M as S,L as V,Y as z,V as E,U as T,S as w}from"./vue-vendor.aaf9f205.js";import{f as F}from"./index.b81d23d8.js";import{P as G}from"./promoteList.2d812d9f.js";import{p as K,t as O,s as Q}from"./vendor.1f164113.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";import"./main.bbde2e19.js";import"./index.9c7d7790.js";const Z={class:"tabs"},j=["onClick"],q=B({__name:"promote",setup(A){const{t:n}=K(),v=O(),k=Q(),c=o(Number(v.params.interval));let x=o([{title:n("yesterday"),interval:1},{title:n("nearly3Days"),interval:3},{title:n("nearly7Days"),interval:7},{title:n("all"),interval:0}]);const a=o([]),m=o(1),C=o(20),r=o(!1),p=o(!1),i=o(!1);function _(){let t=v.params.code;t&&(r.value=!0,F(t,c.value,m.value,C.value).then(s=>{var u;let e=s;m.value>1?a.value=a.value.concat((e==null?void 0:e.data)||[]):a.value=(e==null?void 0:e.data)||[],((u=e==null?void 0:e.data)==null?void 0:u.length)<(e==null?void 0:e.pageSize)?p.value=!0:m.value++}).catch(s=>{console.log(s),i.value=!0}).finally(()=>{setTimeout(()=>{r.value=!1},1e3)}))}function L(t){c.value=t.interval,k.replace({name:"Rebate",params:{code:v.params.code,interval:t.interval}}),y()}function y(){r.value=!1,p.value=!1,i.value=!1,a.value=[],_()}return D(()=>{y()}),(t,s)=>{var h;const e=N,u=$;return d(),f(g,null,[M("ul",Z,[(d(!0),f(g,null,P(R(x),(l,U)=>(d(),f("li",{key:U,class:E(["tab",{active:c.value===l.interval}]),onClick:T(H=>L(l),["stop"])},w(l.title),11,j))),128))]),b(u,{loading:r.value,"onUpdate:loading":s[0]||(s[0]=l=>r.value=l),error:i.value,"onUpdate:error":s[1]||(s[1]=l=>i.value=l),finished:p.value,"loading-text":t.$t("loading"),"error-text":t.$t("errorText"),"finished-text":((h=a.value)==null?void 0:h.length)>0?t.$t("noMore"):"",onLoad:_},{default:S(()=>[b(G,{tableList:a.value},null,8,["tableList"]),a.value&&a.value.length===0&&!r.value?(d(),V(e,{key:0,class:"empty",description:t.$t("emptyData")},null,8,["description"])):z("",!0)]),_:1},8,["loading","error","finished","loading-text","error-text","finished-text"])],64)}}});const oe=Y(q,[["__scopeId","data-v-d9fb571f"]]);export{oe as default};
