import{E as D,e as N}from"./vant-vendor.831bb53a.js";import{d as $,r as s,o as B,K as c,Q as f,R as M,F as h,Z as S,u as V,c as g,M as z,L as E,Y as T,V as U,U as w,S as F}from"./vue-vendor.aaf9f205.js";import{d as G}from"./index.b81d23d8.js";import{R as K}from"./rebateList.db323ad8.js";import{p as O,t as Q,s as Y}from"./vendor.1f164113.js";import{_ as Z}from"./_plugin-vue_export-helper.cdc0426e.js";import"./main.bbde2e19.js";import"./index.9c7d7790.js";const j={class:"tabs"},q=["onClick"],A=$({__name:"rebate",setup(H){const{t:r}=O(),d=Q(),k=Y(),v=s(Number(d.params.interval));let x=s([{title:r("yesterday"),interval:1},{title:r("nearly3Days"),interval:3},{title:r("nearly7Days"),interval:7},{title:r("all"),interval:0}]);const l=s([]),p=s(1),C=s(20),n=s(!1),m=s(!1),i=s(!1);function _(){let t=d.params.code;t&&(n.value=!0,G(t,v.value,p.value,C.value).then(a=>{var u;let e=a==null?void 0:a.page_info;p.value>1?l.value=l.value.concat((e==null?void 0:e.data)||[]):l.value=(e==null?void 0:e.data)||[],((u=e==null?void 0:e.data)==null?void 0:u.length)<(e==null?void 0:e.pageSize)?m.value=!0:p.value++}).catch(a=>{console.log(a),i.value=!0}).finally(()=>{setTimeout(()=>{n.value=!1},1e3)}))}function L(t){v.value=t.interval,k.replace({name:"Rebate",params:{code:d.params.code,interval:t.interval}}),y()}function y(){n.value=!1,m.value=!1,i.value=!1,l.value=[],_()}return B(()=>{y()}),(t,a)=>{var b;const e=D,u=N;return c(),f(h,null,[M("ul",j,[(c(!0),f(h,null,S(V(x),(o,R)=>(c(),f("li",{key:R,class:U(["tab",{active:v.value===o.interval}]),onClick:w(J=>L(o),["stop"])},F(o.title),11,q))),128))]),g(u,{loading:n.value,"onUpdate:loading":a[0]||(a[0]=o=>n.value=o),error:i.value,"onUpdate:error":a[1]||(a[1]=o=>i.value=o),finished:m.value,"loading-text":t.$t("loading"),"error-text":t.$t("errorText"),"finished-text":((b=l.value)==null?void 0:b.length)>0?t.$t("noMore"):"",onLoad:_},{default:z(()=>[g(K,{tableList:l.value},null,8,["tableList"]),l.value&&l.value.length===0&&!n.value?(c(),E(e,{key:0,class:"empty",description:t.$t("emptyData")},null,8,["description"])):T("",!0)]),_:1},8,["loading","error","finished","loading-text","error-text","finished-text"])],64)}}});const se=Z(A,[["__scopeId","data-v-3c462d53"]]);export{se as default};
